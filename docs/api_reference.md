# ğŸ“š é˜¿é‡Œç™¾ç‚¼APIå‚è€ƒæ–‡æ¡£

## ğŸ¯ æ¦‚è¿°
æœ¬æ–‡æ¡£æä¾›é˜¿é‡Œç™¾ç‚¼å…¨åŠŸèƒ½APIçš„å®Œæ•´å‚è€ƒï¼ŒåŒ…æ‹¬æ–‡ç”Ÿå›¾ã€æ–‡ç”Ÿæ–‡ã€æ–‡ç”Ÿè§†é¢‘ç­‰æ‰€æœ‰æ¨¡å‹çš„è¯¦ç»†å‚æ•°è¯´æ˜ã€‚

---

## ğŸ¨ æ–‡ç”Ÿå›¾API

### æ”¯æŒçš„æ¨¡å‹

#### é€šä¹‰åƒé—®æ–‡ç”Ÿå›¾ (qwen-image)
- **æ¨¡å‹åç§°**: `qwen-image`
- **ç‰¹è‰²èƒ½åŠ›**: ä¸­è‹±æ–‡æ–‡æœ¬æ¸²æŸ“ã€å¤æ‚å›¾æ–‡å¸ƒå±€
- **è®¡è´¹**: 0.25å…ƒ/å¼ 
- **å…è´¹é¢åº¦**: 100å¼ ï¼ˆ180å¤©å†…æœ‰æ•ˆï¼‰

#### é€šä¹‰ä¸‡ç›¸æ–‡ç”Ÿå›¾ç³»åˆ—
- `wan2.2-t2i-flash`: æé€Ÿç‰ˆï¼ˆæ¨èï¼‰
- `wan2.2-t2i-plus`: ä¸“ä¸šç‰ˆï¼ˆæ¨èï¼‰
- `wanx2.1-t2i-turbo`: 2.1æé€Ÿç‰ˆ
- `wanx2.1-t2i-plus`: 2.1ä¸“ä¸šç‰ˆ
- `wanx2.0-t2i-turbo`: 2.0æé€Ÿç‰ˆ

### è¯·æ±‚å‚æ•°

#### åŸºç¡€å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ | åƒé—®é™åˆ¶ | ä¸‡ç›¸é™åˆ¶ |
|---|---|---|---|---|---|
| `model` | string | æ˜¯ | æ¨¡å‹åç§° | `qwen-image` | `wan2.2-t2i-flash`ç­‰ |
| `prompt` | string | æ˜¯ | æ­£å‘æç¤ºè¯ï¼Œâ‰¤800å­—ç¬¦ | âœ… | âœ… |
| `negative_prompt` | string | å¦ | åå‘æç¤ºè¯ï¼Œâ‰¤500å­—ç¬¦ | âœ… | âœ… |
| `size` | string | å¦ | è¾“å‡ºå°ºå¯¸ï¼Œé»˜è®¤1024*1024 | å›ºå®š5ç§ | 512-1440ä»»æ„ |
| `n` | int | å¦ | ç”Ÿæˆå›¾ç‰‡æ•°é‡ï¼Œé»˜è®¤1 | ä»…æ”¯æŒ1 | æ”¯æŒ1-4 |
| `prompt_extend` | bool | å¦ | æ™ºèƒ½æ”¹å†™ï¼Œé»˜è®¤true | âœ… | âœ… |
| `watermark` | bool | å¦ | æ·»åŠ æ°´å°ï¼Œé»˜è®¤false | âœ… | âœ… |
| `seed` | int | å¦ | éšæœºç§å­ï¼ŒèŒƒå›´0-2147483647 | âŒ | âœ… |

#### å°ºå¯¸æ”¯æŒè¡¨
**åƒé—®æ¨¡å‹å›ºå®šå°ºå¯¸**:
- `1328*1328` (1:1) - æ­£æ–¹å½¢
- `1664*928` (16:9) - å®½å±
- `1472*1140` (4:3) - æ ‡å‡†
- `1140*1472` (3:4) - ç«–å±
- `928*1664` (9:16) - ç«–é•¿

**ä¸‡ç›¸æ¨¡å‹çµæ´»å°ºå¯¸**:
- èŒƒå›´: 512Ã—512 åˆ° 1440Ã—1440
- é™åˆ¶: æ€»åƒç´ â‰¤200ä¸‡
- æ”¯æŒä»»æ„å®½é«˜æ¯”

### å“åº”æ ¼å¼

#### æˆåŠŸå“åº”
```json
{
  "request_id": "xxx",
  "output": {
    "task_id": "xxx",
    "task_status": "SUCCEEDED",
    "submit_time": "2025-08-13 18:04:35.703",
    "scheduled_time": "2025-08-13 18:04:35.732",
    "end_time": "2025-08-13 18:04:55.601",
    "results": [
      {
        "orig_prompt": "åŸå§‹æç¤ºè¯",
        "actual_prompt": "æ”¹å†™åæç¤ºè¯",
        "url": "https://xxx.png"
      }
    ]
  }
}
```

#### é”™è¯¯å“åº”
```json
{
  "request_id": "xxx",
  "error": {
    "code": "InvalidParameter",
    "message": "å‚æ•°é”™è¯¯è¯¦æƒ…"
  }
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### CLIä½¿ç”¨
```bash
# åŸºç¡€ä½¿ç”¨
python text2image.py "å¯çˆ±çŒ«å’ª" --model wan2.2-t2i-flash --size 1024*1024

# åƒé—®æ¨¡å‹æ–‡å­—æ¸²æŸ“
python text2image.py "ä¸­æ–‡å¯¹è”è®¾è®¡" --model qwen-image --size 1472*1140

# æ‰¹é‡ç”Ÿæˆ
python text2image.py "é£æ™¯ç”»" --model wan2.2-t2i-flash --n 4 --size 512*512
```

#### JSONé…ç½®
```json
{
  "model": "wan2.2-t2i-flash",
  "input": {
    "prompt": "æç¤ºè¯",
    "negative_prompt": "åå‘æç¤ºè¯"
  },
  "parameters": {
    "size": "1024*1024",
    "n": 1,
    "prompt_extend": true,
    "watermark": false,
    "seed": 12345
  }
}
```

---

## ğŸ“ æ–‡ç”Ÿæ–‡API

### æ”¯æŒçš„æ¨¡å‹
- `qwen-turbo`
- `qwen-plus`
- `qwen-max`

### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|---|---|---|---|
| `model` | string | æ˜¯ | æ¨¡å‹åç§° |
| `prompt` | string | æ˜¯ | è¾“å…¥æ–‡æœ¬ |
| `max_tokens` | int | å¦ | æœ€å¤§ç”Ÿæˆé•¿åº¦ï¼Œé»˜è®¤1500 |
| `temperature` | float | å¦ | éšæœºæ€§ï¼Œ0-2ï¼Œé»˜è®¤1.0 |
| `top_p` | float | å¦ | æ ¸é‡‡æ ·ï¼Œ0-1ï¼Œé»˜è®¤0.8 |

### å“åº”æ ¼å¼
```json
{
  "output": {
    "choices": [
      {
        "message": {
          "content": "ç”Ÿæˆçš„æ–‡æœ¬"
        }
      }
    ]
  }
}
```

---

## ğŸ¬ æ–‡ç”Ÿè§†é¢‘API

### æ”¯æŒçš„æ¨¡å‹
- `wan2.1-t2v-plus` (ä¸“ä¸šç‰ˆ)
- `wan2.1-t2v-turbo` (æé€Ÿç‰ˆ)

### è¯·æ±‚å‚æ•°
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|---|---|---|---|
| `model` | string | æ˜¯ | æ¨¡å‹åç§° |
| `prompt` | string | æ˜¯ | è§†é¢‘æè¿°ï¼Œâ‰¤1000å­—ç¬¦ |
| `resolution` | string | å¦ | åˆ†è¾¨ç‡ï¼Œé»˜è®¤"720*1280" |
| `duration` | int | å¦ | æ—¶é•¿ç§’æ•°ï¼Œé»˜è®¤5 |
| `fps` | int | å¦ | å¸§ç‡ï¼Œé»˜è®¤24 |

### åˆ†è¾¨ç‡æ”¯æŒ
- `480*854`
- `720*1280`
- `960*544`
- `1024*576`

---

## ğŸµ éŸ³é¢‘ç›¸å…³API

### è¯­éŸ³åˆæˆ
- `sambert-zhichu-v1` - ä¸­æ–‡è¯­éŸ³åˆæˆ
- `sambert-en-v1` - è‹±æ–‡è¯­éŸ³åˆæˆ

### è¯­éŸ³è¯†åˆ«
- `paraformer-v1` - ä¸­æ–‡è¯­éŸ³è¯†åˆ«
- `paraformer-en-v1` - è‹±æ–‡è¯­éŸ³è¯†åˆ«

---

## ğŸ› ï¸ é€šç”¨è§„èŒƒ

### APIç«¯ç‚¹
- **æ–‡ç”Ÿå›¾**: `/api/v1/services/aigc/text2image/image-synthesis`
- **æ–‡ç”Ÿæ–‡**: `/api/v1/services/aigc/text-generation/generation`
- **æ–‡ç”Ÿè§†é¢‘**: `/api/v1/services/aigc/video-generation/generation`

### è®¤è¯æ–¹å¼
```bash
# Headerè®¤è¯
Authorization: Bearer sk-xxx
X-DashScope-Async: enable
```

### å¼‚æ­¥è°ƒç”¨æµç¨‹
1. POSTåˆ›å»ºä»»åŠ¡è·å–`task_id`
2. GETè½®è¯¢ä»»åŠ¡çŠ¶æ€
3. ä»»åŠ¡æœ‰æ•ˆæœŸ24å°æ—¶
4. ç»“æœæœ‰æ•ˆæœŸ24å°æ—¶

### é”™è¯¯ç è¯´æ˜
| é”™è¯¯ç  | è¯´æ˜ | è§£å†³å»ºè®® |
|---|---|---|
| `InvalidParameter` | å‚æ•°é”™è¯¯ | æ£€æŸ¥å‚æ•°æ ¼å¼å’ŒèŒƒå›´ |
| `DataInspectionFailed` | å†…å®¹ä¸åˆè§„ | ä¿®æ”¹æç¤ºè¯å†…å®¹ |
| `TaskFailed` | ä»»åŠ¡æ‰§è¡Œå¤±è´¥ | é‡è¯•æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ |

### é™æµè§„åˆ™
- **æ–‡ç”Ÿå›¾**: 2 RPS
- **æ–‡ç”Ÿæ–‡**: 10 RPS
- **æ–‡ç”Ÿè§†é¢‘**: 1 RPS

---

## ğŸ“š å®Œæ•´ç¤ºä¾‹

### ç»¼åˆé…ç½®ç¤ºä¾‹
```json
{
  "image_tasks": [
    {
      "model": "wan2.2-t2i-flash",
      "prompt": "æœªæ¥ç§‘æŠ€åŸå¸‚",
      "size": "1440*810",
      "n": 2
    }
  ],
  "text_tasks": [
    {
      "model": "qwen-turbo",
      "prompt": "ç”Ÿæˆäº§å“æ–‡æ¡ˆ"
    }
  ],
  "video_tasks": [
    {
      "model": "wan2.1-t2v-plus",
      "prompt": "æ—¥å‡ºå»¶æ—¶æ‘„å½±",
      "duration": 10
    }
  ]
}
```

### CLIå®Œæ•´ç¤ºä¾‹
```bash
# æ–‡ç”Ÿå›¾
python text2image.py "æœªæ¥åŸå¸‚" --model wan2.2-t2i-flash --size 1440*810 --n 2

# æ–‡ç”Ÿæ–‡ (æœªæ¥æ‰©å±•)
# python text2text.py "å†™ä¸€ç¯‡ç§‘æŠ€æ–‡ç« " --model qwen-turbo

# æ–‡ç”Ÿè§†é¢‘ (æœªæ¥æ‰©å±•)  
# python text2video.py "æ—¥å‡ºå»¶æ—¶" --model wan2.1-t2v-plus --duration 10
```

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
- v1.0: åŸºç¡€æ–‡ç”Ÿå›¾æ”¯æŒ
- v1.1: æ·»åŠ åƒé—®/ä¸‡ç›¸åŒæ¨¡å‹æ”¯æŒ
- v1.2: æ·»åŠ æ–‡ç”Ÿæ–‡ã€æ–‡ç”Ÿè§†é¢‘APIæ–‡æ¡£å ä½
- v1.3: å®Œå–„æ‰€æœ‰æ¨¡å‹å‚æ•°è¯´æ˜

## ğŸ“ æŠ€æœ¯æ”¯æŒ
- å®˜æ–¹æ–‡æ¡£: https://help.aliyun.com/document_detail/2587504.html
- æŠ€æœ¯æ”¯æŒç¾¤: é’‰é’‰ç¾¤å·12345678
- é—®é¢˜åé¦ˆ: https://github.com/aliyun/bailian/issues